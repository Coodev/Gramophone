package com.orobator.android.gramophone.view.fragments;import android.content.Intent;import android.os.Bundle;import android.support.v4.app.ListFragment;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.ListView;import com.orobator.android.gramophone.R;import com.orobator.android.gramophone.model.Album;import com.orobator.android.gramophone.model.Library;import com.orobator.android.gramophone.model.Song;import com.orobator.android.gramophone.view.activities.SongMetadataActivity;import com.orobator.android.gramophone.view.adapters.AlbumAdapter;import com.orobator.android.gramophone.view.adapters.SongAdapter;import java.util.ArrayList;public class AlbumSongsFragment extends ListFragment {    private static final String TAG = "AlbumSongsFragment";    private Album mAlbum;    private ArrayList<Song> mSongs;    private Library mlibrary;    private SongAdapter mAdapter;    @Override    public void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setRetainInstance(true);        Bundle args = getArguments();        String albumName = args.getString(AlbumAdapter.KEY_ALBUM_NAME);        String albumArtist = args.getString(AlbumAdapter.KEY_ALBUM_ARTIST);        getActivity().setTitle(albumName);        mAlbum = new Album();        mAlbum.setAlbumName(albumName);        mAlbum.setAlbumArtist(albumArtist);        mlibrary = Library.getLibrary(getActivity().getApplicationContext());        mSongs = mlibrary.getSongs(mAlbum);        mAdapter = new SongAdapter(mSongs, this);        setListAdapter(mAdapter);    }    @Override    public View onCreateView(LayoutInflater inflater, ViewGroup parent, Bundle savedInstanceState) {        View view = inflater.inflate(R.layout.list_view_songs, parent, false);        return view;    }    @Override    public void onListItemClick(ListView listView, View view, int position, long id) {        Song song = (Song) getListAdapter().getItem(position);        Intent intent = new Intent(getActivity(), SongMetadataActivity.class);        intent.putExtra(SongAdapter.KEY_SONG, song);        startActivity(intent);    }}